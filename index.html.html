<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>대구광역시 동물병원 현황 분석</title>
    <!-- Tailwind CSS CDN 로드 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js 라이브러리 로드 (시각화에 사용) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <!-- Inter 폰트 설정 -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Noto+Sans+KR:wght@100..900&display=swap');
        body {
            font-family: 'Noto Sans KR', 'Inter', sans-serif;
            background-color: #f7f9fc;
        }
        .chart-container {
            height: 300px; /* 모바일 대응을 위해 높이 고정 */
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <!-- 메인 컨테이너 -->
    <div class="max-w-4xl mx-auto">
        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-extrabold text-blue-800 tracking-tight mb-2">
                대구광역시 동물병원 현황 분석 (총 191개)
            </h1>
            <p class="text-lg text-gray-600">시군구별 분포 및 밀집도 시각화</p>
        </header>

        <!-- 데이터 요약 카드 섹션 -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
            <!-- 총 병원 수 카드 -->
            <div class="bg-white p-6 rounded-xl shadow-lg border-b-4 border-blue-500 transition-shadow hover:shadow-2xl">
                <p class="text-sm font-semibold text-gray-500">총 병원 수</p>
                <p class="text-4xl font-bold text-blue-700 mt-1">191<span class="text-xl font-normal ml-1">개</span></p>
            </div>
            <!-- 최다 밀집 지역 카드 -->
            <div class="bg-white p-6 rounded-xl shadow-lg border-b-4 border-green-500 transition-shadow hover:shadow-2xl">
                <p class="text-sm font-semibold text-gray-500">최다 밀집 지역</p>
                <p class="text-2xl font-bold text-green-700 mt-1">달서구 (45개)</p>
                <p class="text-xs text-gray-400">전체의 23.6% 차지</p>
            </div>
            <!-- 최소 지역 카드 -->
            <div class="bg-white p-6 rounded-xl shadow-lg border-b-4 border-red-500 transition-shadow hover:shadow-2xl">
                <p class="text-sm font-semibold text-gray-500">최소 지역</p>
                <p class="text-2xl font-bold text-red-700 mt-1">달성군 (4개)</p>
                <p class="text-xs text-gray-400">지역별 불균형 확인</p>
            </div>
        </div>

        <!-- 그래프 섹션 -->
        <div class="bg-white p-6 md:p-8 rounded-xl shadow-2xl">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-2">시군구별 병원 수 시각화</h2>

            <!-- 막대 그래프 (병원 수 비교) -->
            <div class="mb-10">
                <h3 class="text-xl font-semibold text-gray-700 mb-4">1. 시군구별 동물병원 수 비교 (막대 그래프)</h3>
                <div class="chart-container">
                    <canvas id="barChart"></canvas>
                </div>
                <p class="text-sm text-gray-500 mt-4 text-center">높이가 높은 구역일수록 동물병원 밀집도가 높습니다.</p>
            </div>

            <!-- 원형 그래프 (비율 분포) -->
            <div class="mb-10">
                <h3 class="text-xl font-semibold text-gray-700 mb-4 mt-8">2. 대구 동물병원 비율 분포 (원형 그래프)</h3>
                <div class="flex justify-center">
                    <!-- 원형 차트는 너비를 제한하여 중앙에 배치 -->
                    <div class="w-full md:w-2/3 chart-container">
                        <canvas id="pieChart"></canvas>
                    </div>
                </div>
                <p class="text-sm text-gray-500 mt-4 text-center">달서구, 수성구 두 지역이 전체의 절반 가까이를 차지합니다.</p>
            </div>

            <footer class="mt-8 pt-4 border-t text-sm text-gray-500 text-center">
                <p>데이터 기준: 2025년 5월 22일 | 데이터 출처: 대구광역시_동물병원 현황_20250522.csv</p>
            </footer>
        </div>
    </div>

    <!-- JavaScript for Chart Generation -->
    <script>
        // 데이터
        const data = {
            labels: ['달서구', '수성구', '북구', '동구', '서구', '남구', '중구', '달성군'],
            counts: [45, 44, 33, 22, 18, 15, 10, 4],
            backgroundColors: [
                '#3b82f6', // blue-500 (달서구 - 최다)
                '#10b981', // emerald-500 (수성구 - 2위)
                '#f59e0b', // amber-500 (북구)
                '#ef4444', // red-500 (동구)
                '#6366f1', // indigo-500 (서구)
                '#06b6d4', // cyan-500 (남구)
                '#a855f7', // violet-500 (중구)
                '#9ca3af'  // gray-400 (달성군 - 최소)
            ],
            hoverColors: [
                '#2563eb',
                '#059669',
                '#d97706',
                '#dc2626',
                '#4f46e5',
                '#0891b2',
                '#9333ea',
                '#6b7280'
            ]
        };

        // 1. 막대 그래프 (Bar Chart)
        const barCtx = document.getElementById('barChart').getContext('2d');
        new Chart(barCtx, {
            type: 'bar',
            data: {
                labels: data.labels,
                datasets: [{
                    label: '동물병원 수 (개)',
                    data: data.counts,
                    backgroundColor: data.backgroundColors,
                    borderColor: data.backgroundColors.map(c => c + 'AA'), // 투명도 추가
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false // 범례 숨김
                    },
                    title: {
                        display: false
                    },
                    tooltip: {
                        titleFont: { weight: 'bold' },
                        bodyFont: { size: 14 }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: '병원 수 (개)',
                            font: { size: 14, weight: 'bold' }
                        },
                        ticks: {
                            precision: 0 // 정수만 표시
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: '대구광역시 시군구명',
                            font: { size: 14, weight: 'bold' }
                        }
                    }
                }
            }
        });

        // 2. 원형 그래프 (Pie Chart)
        const pieCtx = document.getElementById('pieChart').getContext('2d');
        new Chart(pieCtx, {
            type: 'pie',
            data: {
                labels: data.labels,
                datasets: [{
                    data: data.counts,
                    backgroundColor: data.backgroundColors,
                    hoverOffset: 10
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'right', // 범례를 오른쪽에 배치
                        labels: {
                            font: { size: 14 }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed !== null) {
                                    // 총합 계산
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const value = context.parsed;
                                    const percentage = ((value / total) * 100).toFixed(1) + '%';
                                    label += value + '개 (' + percentage + ')';
                                }
                                return label;
                            }
                        }
                    },
                    title: {
                        display: false
                    }
                }
            }
        });
    </script>
</body>
</html>